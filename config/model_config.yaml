# ========================================
# 多模型编排配置
# 支持为不同 Agent 配置不同的模型
# ========================================

# === 默认模型配置（全局） ===
default:
  provider: openai               # 默认提供商
  model: deepseek-v3.2-exp-thinking                  # 默认模型
  api_key: "sk-32uJrs709ULv8u5XLRRENg8ItFQSjGFfW4jsF7KXLFDtcBxq"                    # 从环境变量 DMXAPI_KEY 读取
  base_url: "https://www.dmxapi.cn/v1"
  temperature: 0.3
  max_tokens: 4096
  timeout: 360

# === Agent 特定模型配置 ===
# 每个 Agent 可以覆盖默认配置，使用不同的模型

agents:
  # Agent 2: 命令清单生成（简单任务，使用经济模型）
  agent2:
    provider: openai
    model: Qwen3-8B        # 使用小模型节省成本
    temperature: 0.3
    max_tokens: 2048
  
  # Agent 3: 数据校验（需要视觉能力）
  agent3:
    provider: openai
    model: gpt-4o       # 需要视觉支持
    temperature: 0.3
    max_tokens: 8192
    supports_vision: true
  
  # Agent 5: 场景分析（复杂推理，使用高级模型）
  agent5:
    provider: openai
    model: deepseek-v3.2-exp-thinking  # 切换到 Claude（推理能力强）
    temperature: 0.5
    max_tokens: 3072
  
  # Agent 6: 策略生成（高级推理）
  agent6:
    provider: openai
    model: deepseek-v3.2-exp-thinking
    temperature: 0.5
    max_tokens: 4096
  
  # Agent 7: 策略排序
  agent7:
    provider: openai
    model: deepseek-v3.2-exp-thinking
    temperature: 0.5
    max_tokens: 3072
  
  # Agent 8: 最终报告（需要优秀的写作能力）
  agent8:
    provider: openai
    model: deepseek-v3.2-exp-thinking  # Claude 写作能力优秀
    temperature: 0.5
    max_tokens: 4096

# ========================================
# 多提供商混合编排示例
# ========================================

# 示例1: 主要使用 DMXapi，关键 Agent 使用 Claude 官方
# agents:
#   agent2:
#     provider: dmxapi
#     model: gpt-4o-mini
#   agent5:
#     provider: anthropic          # 直连 Anthropic
#     model: claude-sonnet-4-20250514
#     api_key: ""                  # 从 ANTHROPIC_API_KEY 读取
#     base_url: "https://api.anthropic.com"

# 示例2: 全部使用 Claude（高质量但成本高）
# default:
#   provider: anthropic
#   model: claude-sonnet-4-20250514
#   api_key: ""
#   base_url: "https://api.anthropic.com"

# 示例3: 成本优化编排
# agents:
#   agent2:
#     model: gpt-4o-mini           # 简单任务
#   agent3:
#     model: gpt-4o                # 需要视觉
#   agent5:
#     model: claude-sonnet-4-20250514  # 复杂推理
#   agent6:
#     model: claude-sonnet-4-20250514  # 复杂推理
#   agent7:
#     model: gpt-4o                # 对比排序
#   agent8:
#     model: claude-sonnet-4-20250514  # 优秀写作

# ========================================
# API Key 配置说明
# ========================================

# 推荐方式：使用环境变量
# Linux/Mac:
#   export DMXAPI_KEY="your_key"
#   export ANTHROPIC_API_KEY="your_key"
#   export OPENAI_API_KEY="your_key"

# Windows:
#   set DMXAPI_KEY=your_key
#   set ANTHROPIC_API_KEY=your_key
#   set OPENAI_API_KEY=your_key

# 或直接在配置中指定（不推荐，有安全风险）:
# agents:
#   agent5:
#     api_key: "sk-ant-xxx"

# ========================================
# 高级配置
# ========================================

# 重试配置
max_retries: 3
retry_delay: 2
retry_exponential_backoff: true

# 日志配置
log_api_calls: true
log_token_usage: true
log_latency: true

# 成本控制（可选）
cost_tracking:
  enabled: true
  alert_threshold_usd: 10.0    # 单次运行超过$10告警